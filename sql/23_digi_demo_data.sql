-- ============================================================
-- DIGI Marketing: справочники + демо-данные (DML)
-- ============================================================

-- ===== Справочники =====

-- Типы отделов
INSERT INTO DIGI_REF_DEPT_TYPES (CODE, NAME, SORT_ORDER) VALUES ('confectionery', 'Кондитерские изделия', 1);
INSERT INTO DIGI_REF_DEPT_TYPES (CODE, NAME, SORT_ORDER) VALUES ('culinary',      'Кулинария',            2);
INSERT INTO DIGI_REF_DEPT_TYPES (CODE, NAME, SORT_ORDER) VALUES ('cheese',        'Сыры',                 3);
INSERT INTO DIGI_REF_DEPT_TYPES (CODE, NAME, SORT_ORDER) VALUES ('sausage',       'Колбасы',              4);
INSERT INTO DIGI_REF_DEPT_TYPES (CODE, NAME, SORT_ORDER) VALUES ('meat',          'Мясо',                 5);
INSERT INTO DIGI_REF_DEPT_TYPES (CODE, NAME, SORT_ORDER) VALUES ('fish',          'Рыба',                 6);

-- Типы устройств
INSERT INTO DIGI_REF_DEVICE_TYPES (CODE, NAME, SORT_ORDER) VALUES ('SM5300',  'DIGI SM5300',    1);
INSERT INTO DIGI_REF_DEVICE_TYPES (CODE, NAME, SORT_ORDER) VALUES ('SM6000',  'DIGI SM6000',    2);
INSERT INTO DIGI_REF_DEVICE_TYPES (CODE, NAME, SORT_ORDER) VALUES ('WEB3110', 'Касса WEB3110',  3);

-- Разрешения экрана
INSERT INTO DIGI_REF_RESOLUTIONS (CODE, WIDTH, HEIGHT, SORT_ORDER) VALUES ('800x480',   800,  480, 1);
INSERT INTO DIGI_REF_RESOLUTIONS (CODE, WIDTH, HEIGHT, SORT_ORDER) VALUES ('1024x600',  1024, 600, 2);
INSERT INTO DIGI_REF_RESOLUTIONS (CODE, WIDTH, HEIGHT, SORT_ORDER) VALUES ('1280x800',  1280, 800, 3);
INSERT INTO DIGI_REF_RESOLUTIONS (CODE, WIDTH, HEIGHT, SORT_ORDER) VALUES ('1280x1024', 1280, 1024, 4);
INSERT INTO DIGI_REF_RESOLUTIONS (CODE, WIDTH, HEIGHT, SORT_ORDER) VALUES ('1920x1080', 1920, 1080, 5);

-- Связь устройств и разрешений
INSERT INTO DIGI_REF_DEVICE_RESOLUTIONS (DEVICE_TYPE_CODE, RESOLUTION_CODE) VALUES ('SM5300',  '800x480');
INSERT INTO DIGI_REF_DEVICE_RESOLUTIONS (DEVICE_TYPE_CODE, RESOLUTION_CODE) VALUES ('SM5300',  '1024x600');
INSERT INTO DIGI_REF_DEVICE_RESOLUTIONS (DEVICE_TYPE_CODE, RESOLUTION_CODE) VALUES ('SM6000',  '1024x600');
INSERT INTO DIGI_REF_DEVICE_RESOLUTIONS (DEVICE_TYPE_CODE, RESOLUTION_CODE) VALUES ('SM6000',  '1280x800');
INSERT INTO DIGI_REF_DEVICE_RESOLUTIONS (DEVICE_TYPE_CODE, RESOLUTION_CODE) VALUES ('WEB3110', '1920x1080');
INSERT INTO DIGI_REF_DEVICE_RESOLUTIONS (DEVICE_TYPE_CODE, RESOLUTION_CODE) VALUES ('WEB3110', '1280x1024');

-- Роли
INSERT INTO DIGI_REF_ROLES (CODE, NAME, PERMISSIONS) VALUES ('admin',           'Администратор',            'all');
INSERT INTO DIGI_REF_ROLES (CODE, NAME, PERMISSIONS) VALUES ('content_manager', 'Контент-менеджер',         'media,playlists,campaigns');
INSERT INTO DIGI_REF_ROLES (CODE, NAME, PERMISSIONS) VALUES ('marketer',        'Маркетолог',               'campaigns,reports,playlists');
INSERT INTO DIGI_REF_ROLES (CODE, NAME, PERMISSIONS) VALUES ('store_admin',     'Администратор магазина',    'devices,reports');

COMMIT;

-- ===== Демо-данные =====

-- Магазины
INSERT INTO DIGI_STORES (NAME, ADDRESS, REGION, TIMEZONE, STATUS) VALUES ('ТЦ Малина', 'ул. Каля Ешилор 8, Кишинёв', 'Кишинёв', 'Europe/Chisinau', 'active');
INSERT INTO DIGI_STORES (NAME, ADDRESS, REGION, TIMEZONE, STATUS) VALUES ('Маркет №1', 'ул. Штефана чел Маре 120, Бельцы', 'Бельцы', 'Europe/Chisinau', 'active');
INSERT INTO DIGI_STORES (NAME, ADDRESS, REGION, TIMEZONE, STATUS) VALUES ('Супермаркет Центральный', 'ул. Независимости 5, Кишинёв', 'Кишинёв', 'Europe/Chisinau', 'active');

COMMIT;

-- Отделы (для каждого магазина по 4 отдела)
-- Магазин 1 (ТЦ Малина)
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'), 'confectionery', 'Кондитерские изделия');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'), 'culinary',      'Кулинария');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'), 'cheese',        'Сыры');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'), 'sausage',       'Колбасы');
-- Магазин 2 (Маркет №1)
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'), 'confectionery', 'Кондитерские изделия');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'), 'culinary',      'Кулинария');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'), 'cheese',        'Сыры');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'), 'sausage',       'Колбасы');
-- Магазин 3 (Супермаркет Центральный)
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'), 'confectionery', 'Кондитерские изделия');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'), 'culinary',      'Кулинария');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'), 'cheese',        'Сыры');
INSERT INTO DIGI_DEPARTMENTS (STORE_ID, DEPT_TYPE, NAME) VALUES ((SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'), 'sausage',       'Колбасы');

COMMIT;

-- Устройства (9 штук: 3 магазина × 3 отдела)
-- ТЦ Малина
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1000', 'Весы Кондитерские #1', 'SM5300', '800x480',
    (SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='ТЦ Малина' AND dp.DEPT_TYPE='confectionery'),
    '192.168.10.100', '2.1.4', 512);
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1001', 'Весы Кулинария #1', 'SM5300', '1024x600',
    (SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='ТЦ Малина' AND dp.DEPT_TYPE='culinary'),
    '192.168.10.101', '2.1.4', 512);
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1002', 'Весы Сыры #1', 'SM6000', '1024x600',
    (SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='ТЦ Малина' AND dp.DEPT_TYPE='cheese'),
    '192.168.10.102', '2.1.4', 512);
-- Маркет №1
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1010', 'Весы Кондитерские #2', 'WEB3110', '1920x1080',
    (SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='Маркет №1' AND dp.DEPT_TYPE='confectionery'),
    '192.168.11.100', '2.1.4', 512);
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1011', 'Весы Кулинария #2', 'SM5300', '800x480',
    (SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='Маркет №1' AND dp.DEPT_TYPE='culinary'),
    '192.168.11.101', '2.1.4', 512);
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1012', 'Весы Сыры #2', 'SM5300', '1024x600',
    (SELECT ID FROM DIGI_STORES WHERE NAME='Маркет №1'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='Маркет №1' AND dp.DEPT_TYPE='cheese'),
    '192.168.11.102', '2.1.4', 512);
-- Супермаркет Центральный
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1020', 'Весы Кондитерские #3', 'SM6000', '1024x600',
    (SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='Супермаркет Центральный' AND dp.DEPT_TYPE='confectionery'),
    '192.168.12.100', '2.1.4', 512);
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1021', 'Весы Кулинария #3', 'WEB3110', '1920x1080',
    (SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='Супермаркет Центральный' AND dp.DEPT_TYPE='culinary'),
    '192.168.12.101', '2.1.4', 512);
INSERT INTO DIGI_DEVICES (SERIAL_NUMBER, NAME, DEVICE_TYPE, RESOLUTION, STORE_ID, DEPARTMENT_ID, IP_ADDRESS, FIRMWARE_VERSION, MEMORY_TOTAL_MB)
  VALUES ('DIGI-1022', 'Весы Сыры #3', 'SM5300', '800x480',
    (SELECT ID FROM DIGI_STORES WHERE NAME='Супермаркет Центральный'),
    (SELECT dp.ID FROM DIGI_DEPARTMENTS dp JOIN DIGI_STORES s ON s.ID=dp.STORE_ID WHERE s.NAME='Супермаркет Центральный' AND dp.DEPT_TYPE='cheese'),
    '192.168.12.102', '2.1.4', 512);

COMMIT;

-- Медиа-контент (6 файлов)
INSERT INTO DIGI_MEDIA (FILENAME, ORIGINAL_NAME, MEDIA_TYPE, FORMAT, SIZE_BYTES, DESCRIPTION, DURATION_SECONDS, WIDTH, HEIGHT, CREATED_BY)
  VALUES ('promo_summer_sale.jpg', 'Летняя распродажа', 'image', 'jpg', 524288, 'Баннер летней распродажи', 0, 1024, 600, 'ADMIN');
INSERT INTO DIGI_MEDIA (FILENAME, ORIGINAL_NAME, MEDIA_TYPE, FORMAT, SIZE_BYTES, DESCRIPTION, DURATION_SECONDS, WIDTH, HEIGHT, CREATED_BY)
  VALUES ('cheese_collection.jpg', 'Коллекция сыров', 'image', 'jpg', 412000, 'Ассортимент европейских сыров', 0, 800, 480, 'ADMIN');
INSERT INTO DIGI_MEDIA (FILENAME, ORIGINAL_NAME, MEDIA_TYPE, FORMAT, SIZE_BYTES, DESCRIPTION, DURATION_SECONDS, WIDTH, HEIGHT, CREATED_BY)
  VALUES ('meat_promo.mp4', 'Акция на мясо', 'video', 'mp4', 8500000, 'Видео-промо мясного отдела', 15, 1024, 600, 'ADMIN');
INSERT INTO DIGI_MEDIA (FILENAME, ORIGINAL_NAME, MEDIA_TYPE, FORMAT, SIZE_BYTES, DESCRIPTION, DURATION_SECONDS, WIDTH, HEIGHT, CREATED_BY)
  VALUES ('new_year_sale.jpg', 'Новогодняя акция', 'image', 'jpg', 620000, 'Новогодние скидки', 0, 1920, 1080, 'ADMIN');
INSERT INTO DIGI_MEDIA (FILENAME, ORIGINAL_NAME, MEDIA_TYPE, FORMAT, SIZE_BYTES, DESCRIPTION, DURATION_SECONDS, WIDTH, HEIGHT, CREATED_BY)
  VALUES ('sausage_week.jpg', 'Неделя колбас', 'image', 'jpg', 380000, 'Промо неделя колбас', 0, 800, 480, 'ADMIN');
INSERT INTO DIGI_MEDIA (FILENAME, ORIGINAL_NAME, MEDIA_TYPE, FORMAT, SIZE_BYTES, DESCRIPTION, DURATION_SECONDS, WIDTH, HEIGHT, CREATED_BY)
  VALUES ('fish_friday.mp4', 'Рыбная пятница', 'video', 'mp4', 12000000, 'Еженедельная акция на рыбу', 20, 1920, 1080, 'ADMIN');

COMMIT;

-- Теги медиа
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='promo_summer_sale.jpg'), 'акция');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='promo_summer_sale.jpg'), 'лето');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='cheese_collection.jpg'), 'сыры');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='cheese_collection.jpg'), 'ассортимент');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='meat_promo.mp4'), 'мясо');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='meat_promo.mp4'), 'видео');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='meat_promo.mp4'), 'акция');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='new_year_sale.jpg'), 'новый год');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='new_year_sale.jpg'), 'акция');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='sausage_week.jpg'), 'колбасы');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='sausage_week.jpg'), 'промо');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='fish_friday.mp4'), 'рыба');
INSERT INTO DIGI_MEDIA_TAGS (MEDIA_ID, TAG) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='fish_friday.mp4'), 'видео');

-- Разрешения медиа
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='promo_summer_sale.jpg'), '800x480');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='promo_summer_sale.jpg'), '1024x600');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='cheese_collection.jpg'), '800x480');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='cheese_collection.jpg'), '1024x600');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='meat_promo.mp4'), '1024x600');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='new_year_sale.jpg'), '800x480');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='new_year_sale.jpg'), '1024x600');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='new_year_sale.jpg'), '1920x1080');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='sausage_week.jpg'), '800x480');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='fish_friday.mp4'), '1024x600');
INSERT INTO DIGI_MEDIA_RESOLUTIONS (MEDIA_ID, RESOLUTION_CODE) VALUES ((SELECT ID FROM DIGI_MEDIA WHERE FILENAME='fish_friday.mp4'), '1920x1080');

COMMIT;

-- Плейлисты
INSERT INTO DIGI_PLAYLISTS (NAME, DESCRIPTION, TOTAL_DURATION, STATUS, CREATED_BY)
  VALUES ('Летний промо-микс', 'Промо-материалы для летнего сезона', 29, 'active', 'ADMIN');
INSERT INTO DIGI_PLAYLISTS (NAME, DESCRIPTION, TOTAL_DURATION, STATUS, CREATED_BY)
  VALUES ('Общий рекламный', 'Стандартный плейлист для всех магазинов', 37, 'active', 'ADMIN');

-- Элементы плейлистов
-- Летний промо-микс
INSERT INTO DIGI_PLAYLIST_ITEMS (PLAYLIST_ID, MEDIA_ID, DURATION, SORT_ORDER)
  VALUES ((SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Летний промо-микс'), (SELECT ID FROM DIGI_MEDIA WHERE FILENAME='promo_summer_sale.jpg'), 8, 1);
INSERT INTO DIGI_PLAYLIST_ITEMS (PLAYLIST_ID, MEDIA_ID, DURATION, SORT_ORDER)
  VALUES ((SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Летний промо-микс'), (SELECT ID FROM DIGI_MEDIA WHERE FILENAME='cheese_collection.jpg'), 6, 2);
INSERT INTO DIGI_PLAYLIST_ITEMS (PLAYLIST_ID, MEDIA_ID, DURATION, SORT_ORDER)
  VALUES ((SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Летний промо-микс'), (SELECT ID FROM DIGI_MEDIA WHERE FILENAME='meat_promo.mp4'), 15, 3);
-- Общий рекламный
INSERT INTO DIGI_PLAYLIST_ITEMS (PLAYLIST_ID, MEDIA_ID, DURATION, SORT_ORDER)
  VALUES ((SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Общий рекламный'), (SELECT ID FROM DIGI_MEDIA WHERE FILENAME='new_year_sale.jpg'), 10, 1);
INSERT INTO DIGI_PLAYLIST_ITEMS (PLAYLIST_ID, MEDIA_ID, DURATION, SORT_ORDER)
  VALUES ((SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Общий рекламный'), (SELECT ID FROM DIGI_MEDIA WHERE FILENAME='sausage_week.jpg'), 7, 2);
INSERT INTO DIGI_PLAYLIST_ITEMS (PLAYLIST_ID, MEDIA_ID, DURATION, SORT_ORDER)
  VALUES ((SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Общий рекламный'), (SELECT ID FROM DIGI_MEDIA WHERE FILENAME='fish_friday.mp4'), 20, 3);

COMMIT;

-- Кампании
INSERT INTO DIGI_CAMPAIGNS (NAME, DESCRIPTION, PLAYLIST_ID, PRIORITY, STATUS, DELIVERY_STATUS,
                            SCHEDULE_START, SCHEDULE_END, SCHEDULE_TIME_FROM, SCHEDULE_TIME_TO, SCHEDULE_DAYS, CREATED_BY)
  VALUES ('Летняя кампания 2025', 'Промо-материалы для летнего сезона по всем магазинам',
    (SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Летний промо-микс'), 8, 'draft', 'pending',
    TO_DATE('2025-06-01','YYYY-MM-DD'), TO_DATE('2025-08-31','YYYY-MM-DD'), '08:00', '22:00', '1,2,3,4,5,6,7', 'ADMIN');

INSERT INTO DIGI_CAMPAIGNS (NAME, DESCRIPTION, PLAYLIST_ID, PRIORITY, STATUS, DELIVERY_STATUS,
                            SCHEDULE_START, SCHEDULE_END, SCHEDULE_TIME_FROM, SCHEDULE_TIME_TO, SCHEDULE_DAYS, CREATED_BY)
  VALUES ('Новогодняя акция', 'Новогодние промо для ТЦ Малина',
    (SELECT ID FROM DIGI_PLAYLISTS WHERE NAME='Общий рекламный'), 10, 'draft', 'pending',
    TO_DATE('2025-12-15','YYYY-MM-DD'), TO_DATE('2026-01-15','YYYY-MM-DD'), '09:00', '21:00', '1,2,3,4,5,6,7', 'ADMIN');

-- Таргетинг: вторая кампания — только ТЦ Малина
INSERT INTO DIGI_CAMPAIGN_TARGETS (CAMPAIGN_ID, TARGET_TYPE, TARGET_ID)
  VALUES (
    (SELECT ID FROM DIGI_CAMPAIGNS WHERE NAME='Новогодняя акция'),
    'store',
    (SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина')
  );

-- Пересчитаем devices_total для кампаний
UPDATE DIGI_CAMPAIGNS SET DEVICES_TOTAL = (SELECT COUNT(*) FROM DIGI_DEVICES)
  WHERE NAME = 'Летняя кампания 2025';
UPDATE DIGI_CAMPAIGNS SET DEVICES_TOTAL = (
    SELECT COUNT(*) FROM DIGI_DEVICES WHERE STORE_ID = (SELECT ID FROM DIGI_STORES WHERE NAME='ТЦ Малина')
  ) WHERE NAME = 'Новогодняя акция';

COMMIT;

-- Лог событий (аудит инициализации)
INSERT INTO DIGI_EVENT_LOG (ACTION, ENTITY_TYPE, ENTITY_ID, DETAILS, USERNAME)
  VALUES ('init', 'system', NULL, 'Демо-данные инициализированы: 3 магазина, 12 отделов, 9 устройств, 6 медиа, 2 плейлиста, 2 кампании', 'ADMIN');

COMMIT;
