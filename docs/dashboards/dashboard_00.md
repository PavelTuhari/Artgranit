# Dashboard 00: Main Dashboard

## Описание

Основной дашборд с базовыми метриками Oracle Database. Предоставляет обзор состояния базы данных в реальном времени.

## Назначение

Этот дашборд предназначен для:
- **DevOps инженеров**: Мониторинг производительности и состояния БД
- **Администраторов БД**: Отслеживание использования ресурсов
- **Разработчиков**: Анализ производительности SQL-запросов

## Доступные виджеты

### 1. Instance Info
**Тип**: Метрика  
**Класс**: `DatabaseModel.get_instance_info`  
**Описание**: Отображает информацию об экземпляре базы данных:
- Имя экземпляра
- Имя хоста
- Версия Oracle
- Статус подключения

### 2. Memory Usage
**Тип**: Метрика  
**Класс**: `DatabaseModel.get_memory_metrics`  
**Описание**: Мониторинг использования памяти SGA:
- Общий объем памяти
- Использованная память
- Свободная память
- Процент использования

### 3. CPU Usage
**Тип**: Метрика  
**Класс**: `DatabaseModel.get_cpu_metrics`  
**Описание**: Отслеживание загрузки CPU базы данных

### 4. Sessions
**Тип**: Метрика  
**Класс**: `DatabaseModel.get_sessions_metrics`  
**Описание**: Статистика сессий:
- Общее количество сессий
- Активные сессии
- Неактивные сессии

### 5. Tablespaces
**Тип**: Метрика  
**Класс**: `DatabaseModel.get_tablespaces`  
**Описание**: Информация о табличных пространствах:
- Имя пространства
- Общий объем
- Использованный объем
- Свободный объем
- Процент использования

### 6. Top SQL Queries
**Тип**: Метрика  
**Класс**: `DatabaseModel.get_top_sql`  
**Описание**: Топ SQL-запросов по использованию ресурсов:
- SQL ID
- Текст запроса
- Количество выполнений
- Время выполнения
- CPU время

### 7. Server System Metrics
**Тип**: Метрика  
**Класс**: `DashboardController.get_system_metrics`  
**Описание**: Системные метрики сервера:
- Память сервера (общий объем, использовано, свободно)
- Место на диске (общий объем, использовано, свободно)

### 8. Погода и время
**Тип**: Метрика  
**Класс**: `DashboardController.get_weather_info`  
**Описание**: Текущее время, температура и состояние погоды

## Развертывание

### Требования
- Oracle Database 12c+
- Python 3.12+
- Flask и зависимости из `requirements.txt`

### Установка

1. **Установите зависимости:**
```bash
pip install -r requirements.txt
```

2. **Настройте подключение к БД:**
Отредактируйте `.env` файл с параметрами подключения к Oracle.

3. **Запустите приложение:**
```bash
./run_local.sh
```

### Настройка виджетов

Виджеты настраиваются в файле `dashboards/dashboard_00.json`. Вы можете:
- Изменить позицию виджетов
- Изменить размеры
- Включить/выключить виджеты
- Настроить параметры обновления

## Доработка

### Добавление нового виджета

1. **Создайте метод в контроллере:**
```python
# В controllers/dashboard_controller.py
@staticmethod
def get_my_metric() -> Dict[str, Any]:
    # Ваша логика
    return {"data": "..."}
```

2. **Добавьте виджет в JSON:**
```json
{
  "widget_id": "my_widget",
  "title": "My Widget",
  "metric_name": "my_metric",
  "class_name": "DashboardController",
  "method_name": "get_my_metric"
}
```

3. **Добавьте рендеринг в `dashboard_mdi.html`:**
```javascript
case 'my_metric':
    html = `<!-- Ваш HTML -->`;
    break;
```

### Кастомизация обновления

Виджеты обновляются через WebSocket. Интервал обновления настраивается в `metadata.update_interval` (секунды).

## Troubleshooting

### Виджет не отображается
- Проверьте, что `enabled: true` в JSON конфигурации
- Проверьте консоль браузера на ошибки JavaScript
- Убедитесь, что метод контроллера возвращает корректные данные

### Данные не обновляются
- Проверьте подключение WebSocket (консоль браузера)
- Проверьте логи сервера на ошибки
- Убедитесь, что `websocket_enabled: true` в метаданных

### Ошибки подключения к БД
- Проверьте параметры в `.env`
- Убедитесь, что Oracle Wallet настроен правильно
- Проверьте доступность БД

## Дополнительные ресурсы

- [Общая документация проекта](../README.md)
- [Руководство по развертыванию](../DEPLOYMENT.md)
- [API документация](../API.md)
